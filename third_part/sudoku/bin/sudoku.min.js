var underscore;!function(n){var r=this,t=r._,e={},u=Array.prototype,i=Object.prototype,a=Function.prototype,o=u.slice,l=u.unshift,c=i.toString,f=i.hasOwnProperty,s=u.forEach,p=u.map,v=u.reduce,g=u.reduceRight,h=u.filter,d=u.every,m=u.some,y=u.indexOf,w=u.lastIndexOf,_=Array.isArray,x=Object.keys,b=a.bind,A=function(n){return new j(n)};"undefined"!=typeof module&&module.exports?(module.exports=A,A._=A):r._=A,A.VERSION="1.1.6";var E=A.each=A.forEach=function(n,r,t){if(null!=n)if(s&&n.forEach===s)n.forEach(r,t);else if(A.isNumber(n.length)){for(var u=0,i=n.length;i>u;u++)if(r.call(t,n[u],u,n)===e)return}else for(var a in n)if(f.call(n,a)&&r.call(t,n[a],a,n)===e)return};A.map=function(n,r,t){var e=[];return null==n?e:p&&n.map===p?n.map(r,t):(E(n,function(n,u,i){e[e.length]=r.call(t,n,u,i)}),e)},A.reduce=A.foldl=A.inject=function(n,r,t,e){var u=void 0!==t;if(null==n&&(n=[]),v&&n.reduce===v)return e&&(r=A.bind(r,e)),u?n.reduce(r,t):n.reduce(r);if(E(n,function(n,i,a){u||0!==i?t=r.call(e,t,n,i,a):(t=n,u=!0)}),!u)throw new TypeError("Reduce of empty array with no initial value");return t},A.reduceRight=A.foldr=function(n,r,t,e){if(null==n&&(n=[]),g&&n.reduceRight===g)return e&&(r=A.bind(r,e)),void 0!==t?n.reduceRight(r,t):n.reduceRight(r);var u=(A.isArray(n)?n.slice():A.toArray(n)).reverse();return A.reduce(u,r,t,e)},A.find=A.detect=function(n,r,t){var e;return O(n,function(n,u,i){return r.call(t,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,r,t){var e=[];return null==n?e:h&&n.filter===h?n.filter(r,t):(E(n,function(n,u,i){r.call(t,n,u,i)&&(e[e.length]=n)}),e)},A.reject=function(n,r,t){var e=[];return null==n?e:(E(n,function(n,u,i){r.call(t,n,u,i)||(e[e.length]=n)}),e)},A.every=A.all=function(n,r,t){var u=!0;return null==n?u:d&&n.every===d?n.every(r,t):(E(n,function(n,i,a){return(u=u&&r.call(t,n,i,a))?void 0:e}),u)};var O=A.some=A.any=function(n,r,t){r||(r=A.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(r,t):(E(n,function(n,i,a){return(u=r.call(t,n,i,a))?e:void 0}),u)};A.include=A.contains=function(n,r){var t=!1;return null==n?t:y&&n.indexOf===y?-1!=n.indexOf(r):(O(n,function(n){return(t=n===r)?!0:void 0}),t)},A.invoke=function(n,r){var t=o.call(arguments,2);return A.map(n,function(n){return(r.call?r||n:n[r]).apply(n,t)})},A.pluck=function(n,r){return A.map(n,function(n){return n[r]})},A.max=function(n,r,t){if(!r&&A.isArray(n))return Math.max.apply(Math,n);var e={computed:-(1/0)};return E(n,function(n,u,i){var a=r?r.call(t,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},A.min=function(n,r,t){if(!r&&A.isArray(n))return Math.min.apply(Math,n);var e={computed:1/0};return E(n,function(n,u,i){var a=r?r.call(t,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},A.sortBy=function(n,r,t){return A.pluck(A.map(n,function(n,e,u){return{value:n,criteria:r.call(t,n,e,u)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;return e>t?-1:t>e?1:0}),"value")},A.sortedIndex=function(n,r,t){t||(t=A.identity);for(var e=0,u=n.length;u>e;){var i=e+u>>1;t(n[i])<t(r)?e=i+1:u=i}return e},A.toArray=function(n){return n?n.toArray?n.toArray():A.isArray(n)?n:A.isArguments(n)?o.call(n):A.values(n):[]},A.size=function(n){return A.toArray(n).length},A.first=A.head=function(n,r,t){return null==r||t?n[0]:o.call(n,0,r)},A.rest=A.tail=function(n,r,t){return o.call(n,null==r||t?1:r)},A.last=function(n){return n[n.length-1]},A.compact=function(n){return A.filter(n,function(n){return!!n})},A.flatten=function(n){return A.reduce(n,function(n,r){return A.isArray(r)?n.concat(A.flatten(r)):(n[n.length]=r,n)},[])},A.without=function(n){var r=o.call(arguments,1);return A.filter(n,function(n){return!A.include(r,n)})},A.uniq=A.unique=function(n,r){return A.reduce(n,function(n,t,e){return 0!=e&&(r===!0?A.last(n)==t:A.include(n,t))||(n[n.length]=t),n},[])},A.intersect=function(n){var r=o.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(r,function(r){return A.indexOf(r,n)>=0})})},A.zip=function(){for(var n=o.call(arguments),r=A.max(A.pluck(n,"length")),t=new Array(r),e=0;r>e;e++)t[e]=A.pluck(n,""+e);return t},A.indexOf=function(n,r,t){if(null==n)return-1;var e,u;if(t)return e=A.sortedIndex(n,r),n[e]===r?e:-1;if(y&&n.indexOf===y)return n.indexOf(r);for(e=0,u=n.length;u>e;e++)if(n[e]===r)return e;return-1},A.lastIndexOf=function(n,r){if(null==n)return-1;if(w&&n.lastIndexOf===w)return n.lastIndexOf(r);for(var t=n.length;t--;)if(n[t]===r)return t;return-1},A.range=function(n,r,t){arguments.length<=1&&(r=n||0,n=0),t=arguments[2]||1;for(var e=Math.max(Math.ceil((r-n)/t),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=t;return i},A.bind=function(n,r){if(n.bind===b&&b)return b.apply(n,o.call(arguments,1));var t=o.call(arguments,2);return function(){return n.apply(r,t.concat(o.call(arguments)))}},A.bindAll=function(n){var r=o.call(arguments,1);return 0==r.length&&(r=A.functions(n)),E(r,function(r){n[r]=A.bind(n[r],n)}),n},A.memoize=function(n,r){var t={};return r||(r=A.identity),function(){var e=r.apply(this,arguments);return f.call(t,e)?t[e]:t[e]=n.apply(this,arguments)}},A.delay=function(n,r){var t=o.call(arguments,2);return setTimeout(function(){return n.apply(n,t)},r)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(o.call(arguments,1)))};var k=function(n,r,t){var e;return function(){var u=this,i=arguments,a=function(){e=null,n.apply(u,i)};t&&clearTimeout(e),(t||!e)&&(e=setTimeout(a,r))}};A.throttle=function(n,r){return k(n,r,!1)},A.debounce=function(n,r){return k(n,r,!0)},A.once=function(n){var r,t=!1;return function(){return t?r:(t=!0,r=n.apply(this,arguments))}},A.wrap=function(n,r){return function(){var t=[n].concat(o.call(arguments));return r.apply(this,t)}},A.compose=function(){var n=o.call(arguments);return function(){for(var r=o.call(arguments),t=n.length-1;t>=0;t--)r=[n[t].apply(this,r)];return r[0]}},A.after=function(n,r){return function(){return--n<1?r.apply(this,arguments):void 0}},A.keys=x||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var r=[];for(var t in n)f.call(n,t)&&(r[r.length]=t);return r},A.values=function(n){return A.map(n,A.identity)},A.functions=A.methods=function(n){return A.filter(A.keys(n),function(r){return A.isFunction(n[r])}).sort()},A.extend=function(n){return E(o.call(arguments,1),function(r){for(var t in r)void 0!==r[t]&&(n[t]=r[t])}),n},A.defaults=function(n){return E(o.call(arguments,1),function(r){for(var t in r)null==n[t]&&(n[t]=r[t])}),n},A.clone=function(n){return A.isArray(n)?n.slice():A.extend({},n)},A.tap=function(n,r){return r(n),n},A.isEqual=function(n,r){if(n===r)return!0;var t=typeof n,e=typeof r;if(t!=e)return!1;if(n==r)return!0;if(!n&&r||n&&!r)return!1;if(n._chain&&(n=n._wrapped),r._chain&&(r=r._wrapped),n.isEqual)return n.isEqual(r);if(A.isDate(n)&&A.isDate(r))return n.getTime()===r.getTime();if(A.isNaN(n)&&A.isNaN(r))return!1;if(A.isRegExp(n)&&A.isRegExp(r))return n.source===r.source&&n.global===r.global&&n.ignoreCase===r.ignoreCase&&n.multiline===r.multiline;if("object"!==t)return!1;if(n.length&&n.length!==r.length)return!1;var u=A.keys(n),i=A.keys(r);if(u.length!=i.length)return!1;for(var a in n)if(!(a in r&&A.isEqual(n[a],r[a])))return!1;return!0},A.isEmpty=function(n){if(A.isArray(n)||A.isString(n))return 0===n.length;for(var r in n)if(f.call(n,r))return!1;return!0},A.isElement=function(n){return!(!n||1!=n.nodeType)},A.isArray=_||function(n){return"[object Array]"===c.call(n)},A.isArguments=function(n){return!(!n||!f.call(n,"callee"))},A.isFunction=function(n){return!!(n&&n.constructor&&n.call&&n.apply)},A.isString=function(n){return!!(""===n||n&&n.charCodeAt&&n.substr)},A.isNumber=function(n){return!!(0===n||n&&n.toExponential&&n.toFixed)},A.isNaN=function(n){return n!==n},A.isBoolean=function(n){return n===!0||n===!1},A.isDate=function(n){return!!(n&&n.getTimezoneOffset&&n.setUTCFullYear)},A.isRegExp=function(n){return!(!(n&&n.test&&n.exec)||!n.ignoreCase&&n.ignoreCase!==!1)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.noConflict=function(){return r._=t,this},A.identity=function(n){return n},A.times=function(n,r,t){for(var e=0;n>e;e++)r.call(t,e)},A.mixin=function(n){E(A.functions(n),function(r){N(r,A[r]=n[r])})};var M=0;A.uniqueId=function(n){var r=M++;return n?n+r:r},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},A.template=function(n,r){var t=A.templateSettings,e="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+n.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(t.interpolate,function(n,r){return"',"+r.replace(/\\'/g,"'")+",'"}).replace(t.evaluate||null,function(n,r){return"');"+r.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",u=new Function("obj",e);return r?u(r):u};var j=function(n){this._wrapped=n};A.prototype=j.prototype;var z=function(n,r){return r?A(n).chain():n},N=function(n,r){j.prototype[n]=function(){var n=o.call(arguments);return l.call(n,this._wrapped),z(r.apply(A,n),this._chain)}};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=u[n];j.prototype[n]=function(){return r.apply(this._wrapped,arguments),z(this._wrapped,this._chain)}}),E(["concat","join","slice"],function(n){var r=u[n];j.prototype[n]=function(){return z(r.apply(this._wrapped,arguments),this._chain)}}),j.prototype.chain=function(){return this._chain=!0,this},j.prototype.value=function(){return this._wrapped},n.map=A.map,n.range=A.range}(underscore||(underscore={}));var sudoku;!function(n){function r(n){var r=[],t=w(81,null),u=x.range(81);m(u);for(var i=0;i<u.length;i++){var a=u[i];null==t[a]&&(r.push({pos:a,num:n[a]}),t[a]=n[a],o(t))}m(r);for(var i=r.length-1;i>=0;i--){var l=r[i];y(r,i);var c=e(g(r),n);-1==c&&r.push(l)}return g(r)}function t(n,r){for(var t=0,e=0;r>e;e++){var u=i(n);if(null==u.answer)return-1;t+=u.state.length}return t/r}function e(n,r){r==_&&(r=null);var t=i(n);if(null==t.answer)return-1;if(null!=r&&0==h(r,t.answer))return-1;var e=t.state.length,u=a(t.state);return null!=u.answer?-1:e}function u(n){return i(n).answer}function i(n){var r=[].concat(n),t=o(r);if(null==t)return{state:[],answer:r};var e=[{guesses:t,count:0,board:r}];return a(e)}function a(n){for(;n.length>0;){var r=n.pop();if(!(r.count>=r.guesses.length)){n.push({guesses:r.guesses,count:r.count+1,board:r.board});var t=[].concat(r.board),e=r.guesses[r.count];t[e.pos]=e.num;var u=o(t);if(null==u)return{state:n,answer:t};n.push({guesses:u,count:0,board:t})}}return{state:[],answer:null}}function o(n){for(;;){for(var r=!0,t=null,e=0,u=l(n),i=u.allowed,a=u.needed,o=0;81>o;o++)if(null==n[o]){var f=p(i[o]);if(0==f.length)return[];if(1==f.length)n[o]=f[0],r=!1;else if(1==r){var s=x.map(f,function(n,r){return{pos:o,num:n}}),g=v(t,e,s);t=g.guess,e=g.count}}if(0==r){var h=l(n);i=h.allowed,a=h.needed}for(var d=0;3>d;d++)for(var y=0;9>y;y++)for(var f=p(a[9*d+y]),w=0;w<f.length;w++){for(var _=f[w],b=1<<_,A=[],E=0;9>E;E++){var o=c(y,E,d);i[o]&b&&A.push(o)}if(0==A.length)return[];if(1==A.length)n[A[0]]=_,r=!1;else if(r){var s=x.map(A,function(n,r){return{pos:n,num:_}}),O=v(t,e,s);t=O.guess,e=O.count}}if(1==r)return null!=t&&m(t),t}}function l(n){for(var r=[],t=x.map(n,function(n,r){return null==n?511:0},[]),e=0;3>e;e++)for(var u=0;9>u;u++){var i=s(n,u,e);r.push(i);for(var a=0;9>a;a++){var o=c(u,a,e);t[o]=t[o]&i}}return{allowed:t,needed:r}}function c(n,r,t){return t==_&&(t=0),0==t?9*n+r:1==t?9*r+n:[0,3,6,27,30,33,54,57,60][n]+[0,1,2,9,10,11,18,19,20][r]}function f(n,r){return 0==r?Math.floor(n/9):1==r?n%9:3*Math.floor(n/27)+Math.floor(n/3)%3}function s(n,r,t){for(var e=0,u=0;9>u;u++){var i=n[c(r,u,t)];null!=i&&(e|=1<<i)}return 511^e}function p(n){for(var r=[],t=0;9>t;t++)0!=(n&1<<t)&&r.push(t);return r}function v(n,r,t){return null==n||t.length<n.length?{guess:t,count:1}:t.length>n.length?{guess:n,count:r}:0==d(r)?{guess:t,count:r+1}:{guess:n,count:r+1}}function g(n){for(var r=x.map(x.range(81),function(n,r){return null}),t=0;t<n.length;t++){var e=n[t],u=e.pos,i=e.num;r[u]=i}return r}function h(n,r){for(var t=0;81>t;t++)if(n[t]!=r[t])return!1;return!0}function d(n){return Math.floor(Math.random()*(n+1))}function m(n){for(var r=0;r<n.length;r++){for(var t=r;t==r;)t=Math.floor(Math.random()*n.length);var e=n[r];n[r]=n[t],n[t]=e}}function y(n,r,t){var e=n.slice((t||r)+1||n.length);return n.length=0>r?n.length+r:r,n.push.apply(n,e)}function w(n,r){return x.map(x.range(n),function(n,t){return r})}var _,x=underscore;n.makepuzzle=function(){return r(u(w(81,null)))},n.solvepuzzle=u,n.ratepuzzle=t,n.posfor=c}(sudoku||(sudoku={}));